<nav class="flex mt-[100px] ml-[200px]" aria-label="Breadcrumb">
  <ol
    class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"
  >
    <li class="inline-flex items-center">
      <a
        href="/hotels"
        class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-green-500 dark:text-gray-400 dark:hover:text-white"
      >
        <svg
          class="w-3 h-3 me-2.5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"
          />
        </svg>
        Hotels
      </a>
    </li>
    <li>
      <div class="flex items-center">
        <svg
          class="w-3 h-3 mx-1 text-gray-400 rtl:rotate-180"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 6 10"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m1 9 4-4-4-4"
          />
        </svg>
        <a
          href="hotel/contracts/{{ hotelID }}"
          class="text-sm font-medium text-gray-700 ms-1 hover:text-green-500 md:ms-2 dark:text-gray-400 dark:hover:text-white"
          >Contracts</a
        >
      </div>
    </li>
    <li>
      <div class="flex items-center">
        <svg
          class="w-3 h-3 mx-1 text-gray-400 rtl:rotate-180"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 6 10"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m1 9 4-4-4-4"
          />
        </svg>
        <a
          href="hotel/contracts/{{ hotelID }}"
          class="text-sm font-medium text-gray-700 ms-1 hover:text-green-500 md:ms-2 dark:text-gray-400 dark:hover:text-white"
          >Add Contract</a
        >
      </div>
    </li>
  </ol>
</nav>

<form
  class="max-w-3xl p-4 mx-auto mt-[20px]"
  (ngSubmit)="onSubmitContractDetails()"
  [formGroup]="form"
>
  <h2 class="mb-4 text-3xl font-extrabold text-center dark:text-white">
    Add a Hotel Contract
  </h2>

  <!-- Valid From and Valid To in one row -->
  <div class="flex mb-3 space-x-3">
    <div class="w-1/2">
      <label class="block mb-1 text-sm font-medium">Contract Valid From</label>
      <input
        type="date"
        formControlName="contractvalidFrom"
        class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
        [readonly]="isContractSubmitted"
      />
    </div>
    <div class="w-1/2">
      <label class="block mb-1 text-sm font-medium">Contract Valid To</label>
      <input
        type="date"
        formControlName="contractvalidTo"
        class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
        [readonly]="isContractSubmitted"
      />
    </div>
  </div>

  <!-- Cancellation Policy Field -->
  <div class="mb-4">
    <label
      for="cancellationPolicy"
      class="block mb-1 text-sm font-medium text-gray-900 dark:text-white"
    >
      Cancellation Policy
    </label>
    <textarea
      id="cancellationPolicy"
      formControlName="cancellationPolicy"
      rows="3"
      class="block w-full p-1 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-green-500 focus:border-green-500 dark:bg-gray-500 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-500 dark:focus:border-green-500"
      placeholder="Write a brief description about cancellation policy"
      required
      [readonly]="isContractSubmitted"
    ></textarea>
  </div>

  <!-- Payment Policy Field -->
  <div class="mb-4">
    <label
      for="paymentPolicy"
      class="block mb-1 text-sm font-medium text-gray-900 dark:text-white"
    >
      Payment Policy
    </label>
    <textarea
      id="paymentPolicy"
      formControlName="paymentPolicy"
      rows="3"
      class="block w-full p-1 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-green-500 focus:border-green-500 dark:bg-gray-500 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-500 dark:focus:border-green-500"
      placeholder="Write a brief description about payment policy"
      required
      [readonly]="isContractSubmitted"
    ></textarea>
  </div>

  <!-- Submit Contract Details Button -->
  <button
    type="submit"
    class="px-2 py-1 m-4 mt-2 text-sm font-bold text-white transition-all bg-blue-500 rounded hover:bg-blue-600"
    [disabled]="isContractSubmitted"
  >
    Submit Contract Details
  </button>

  <br />

  <!-- Loop for Seasons -->
  <div
    formArrayName="seasons"
    *ngFor="let season of seasons.controls; let i = index"
  >
    <div [formGroupName]="i" class="p-3 mb-6 border rounded-lg">
      <h3 class="mb-2 text-lg font-bold dark:text-white">Season {{ i + 1 }}</h3>

      <!-- Season Name -->
      <div class="flex justify-center gap-4 mt-3">
        <div class="w-1/4 mb-3">
          <label class="block mb-1 text-sm font-medium">Season Name</label>
          <input
            type="text"
            formControlName="seasonName"
            class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
            placeholder="Summer, Autumn..."
            [readonly]="isSeasonSubmitted[i]"
          />
        </div>

        <!-- Valid From -->
        <div class="w-1/4 mb-3">
          <label class="block mb-1 text-sm font-medium">Valid From</label>
          <input
            type="date"
            formControlName="validFrom"
            class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
            [readonly]="isSeasonSubmitted[i]"
          />
        </div>

        <!-- Valid To -->
        <div class="w-1/4 mb-3">
          <label class="block mb-1 text-sm font-medium">Valid To</label>
          <input
            type="date"
            formControlName="validTo"
            class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
            [readonly]="isSeasonSubmitted[i]"
          />
        </div>


          
          <button
            type="button"
            class="mt-[25px] w-24 h-8 px-2 py-1 mx-5 text-sm font-bold text-white transition-all bg-blue-500 rounded hover:bg-blue-600"
            (click)="onSubmitSeasonDetails(i)"
            [disabled]="isSeasonSubmitted[i]"
          >
            + Season
          </button>
          <button
            type="button"
            class="mt-3 text-red-500 transition-all hover:text-red-700"
            (click)="removeSeason(i)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>

        

        <!-- Remove Season Button -->
        <!-- <button type="button" class="mt-3 text-red-500" (click)="removeSeason(i)">
          Remove Season
        </button> -->
      </div>

      <!-- Room Types -->
      <div formArrayName="roomTypes" *ngIf="isSeasonSubmitted[i]">
        <div
          *ngFor="let room of roomTypes(i).controls; let j = index"
          [formGroupName]="j"
          class="p-3 mt-3 border rounded-lg"
        >
          <h4 class="font-semibold text-md">Room Type {{ j + 1 }}</h4>

          <div class="flex gap-4 mt-3">
            <div class="w-1/4 mb-3">
              <label class="block mb-1 text-sm font-medium"
                >Room Type Name</label
              >
              <input
                type="text"
                formControlName="roomTypeName"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
                placeholder="Deluxe, Suite..."
              />
            </div>

            <div class="w-1/4 mb-3">
              <label class="block mb-1 text-sm font-medium"
                >Number of Rooms</label
              >
              <input
                type="number"
                formControlName="numberOfRooms"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
              />
            </div>

            <div class="w-1/4 mb-3">
              <label class="block mb-1 text-sm font-medium"
                >Max No. of Persons</label
              >
              <input
                type="number"
                formControlName="maxNumberOfPersons"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
              />
            </div>

            <div class="w-1/4 mb-3">
              <label class="block mb-1 text-sm font-medium">Price</label>
              <input
                type="number"
                formControlName="price"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
              />
            </div>
          </div>

          <!-- Room Type Image Upload -->
          <div class="mb-3">
            <label class="block mb-1 text-sm font-medium">Upload Images</label>
            <input
              type="file"
              formControlName="images"
              (change)="onImageUpload($event, i, j)"
              multiple
              class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50"
            />
          </div>

          <!-- Image Preview -->
          <div *ngIf="roomImages[i][j]?.length">
            <label class="block mb-1 text-sm font-medium">Image Preview:</label>
            <div class="flex flex-wrap gap-2">
              <img
                *ngFor="let image of roomImages[i][j]"
                [src]="image.src"
                alt="Room Image"
                class="object-cover w-24 h-24 rounded-lg"
              />
            </div>
          </div>

          <!-- <button type="button" class="text-red-500" (click)="removeRoom(i, j)">
            Remove Room Type
          </button> -->

          
          <button
            type="button"
            class="h-8 px-2 py-1 m-2 mt-2 text-sm font-bold text-white transition-all bg-blue-500 rounded w-36 hover:bg-blue-600"
            (click)="onSubmitRoomTypeDetails(i, j)"
          >
            + Room Type
          </button>

          <button
            type="button"
            class="mt-3 text-red-500 transition-all hover:text-red-700"
            (click)="removeRoom(i, j)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>

        <!-- Add Room Type Button -->
        <button
          type="button"
          class="px-2 py-1 mt-2 font-bold text-white transition-all bg-green-500 rounded hover:bg-green-700"
          (click)="addRoomType(i)"
        >
          New Room Type
        </button>
      </div>

      <!-- Discounts -->
      <div formArrayName="discounts" class="mt-3" *ngIf="isSeasonSubmitted[i]">
        <div
          *ngFor="let discount of discounts(i).controls; let k = index"
          [formGroupName]="k"
          class="p-3 mt-2 border rounded-lg"
        >
          <h4 class="font-semibold text-md">Discount {{ k + 1 }}</h4>

          <div class="flex justify-center gap-4 mt-3">
            <div class="w-1/2 mb-3">
              <label class="block mb-1 text-sm font-medium"
                >Discount Name</label
              >
              <input
                type="text"
                formControlName="discountName"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
                placeholder="Early Bird, Holiday ..."
              />
            </div>

            <div class="w-1/2 mb-3">
              <label class="block mb-1 text-sm font-medium">Percentage</label>
              <input
                type="number"
                formControlName="percentage"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
              />
            </div>

            <button
              type="button"
              class="mt-[25px] h-8 px-2 py-1 m-2 text-sm font-bold text-white transition-all bg-blue-500 rounded w-36 hover:bg-blue-600"
              (click)="onSubmitDiscountDetails(i, k)"
            >
              + Discount
            </button>

            <button
            type="button"
            class="mt-3 text-red-500 transition-all hover:text-red-700"
            (click)="removeDiscount(i, k)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
            <!-- <button
              type="button"
              class="text-red-500"
              (click)="removeDiscount(i, k)"
            >
              Remove Discount
            </button> -->
          </div>
        </div>

        <!-- Add Discount Button -->
        <button
          type="button"
          class="px-2 py-1 mt-2 font-bold text-white transition-all bg-green-500 rounded hover:bg-green-700"
          (click)="addDiscount(i)"
        >
          New Discount
        </button>
      </div>

      <!-- Markups -->
      <div formArrayName="markups" class="mt-3" *ngIf="isSeasonSubmitted[i]">
        <div
          *ngFor="let markup of markups(i).controls; let l = index"
          [formGroupName]="l"
          class="p-3 mt-2 border rounded-lg"
        >
          <h4 class="font-semibold text-md">Markup {{ l + 1 }}</h4>

          <div class="flex justify-center gap-4 mt-3">
            <div class="w-1/2 mb-3">
              <label class="block mb-1 text-sm font-medium">Markup Name</label>
              <input
                type="text"
                formControlName="markupName"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
                placeholder="Seasonal, Special..."
              />
            </div>

            <div class="w-1/2 mb-3">
              <label class="block mb-1 text-sm font-medium">Percentage</label>
              <input
                type="number"
                formControlName="percentage"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
              />
            </div>

            <button
              type="button"
              class="mt-[25px] h-8 px-2 py-1 m-2 text-sm font-bold text-white transition-all bg-blue-500 rounded w-36 hover:bg-blue-600"
              (click)="onSubmitMarkupDetails(i, l)"
            >
              + Markup
            </button>
            <!-- <button
              type="button"
              class="text-red-500"
              (click)="removeMarkup(i, l)"
            >
              Remove Markup
            </button> -->

            <button
            type="button"
            class="mt-3 text-red-500 transition-all hover:text-red-700"
            (click)="removeMarkup(i, l)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
          </div>
        </div>

        <!-- Add Markup Button -->
        <button
          type="button"
          class="px-2 py-1 mt-2 font-bold text-white transition-all bg-green-500 rounded hover:bg-green-700"
          (click)="addMarkup(i)"
        >
          New Markup
        </button>
      </div>

      <!-- Supplements -->
      <div
        formArrayName="supplements"
        class="mt-3"
        *ngIf="isSeasonSubmitted[i]"
      >
        <div
          *ngFor="let supplement of supplements(i).controls; let m = index"
          [formGroupName]="m"
          class="p-3 mt-2 border rounded-lg"
        >
          <h4 class="font-semibold text-md">Supplement {{ m + 1 }}</h4>

          <div class="flex justify-center gap-4 mt-3">
            <div class="w-1/2 mb-3">
              <label class="block mb-1 text-sm font-medium"
                >Supplement Name</label
              >
              <input
                type="text"
                formControlName="supplementName"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
                placeholder="Breakfast, Parking ..."
              />
            </div>

            <div class="w-1/2 mb-3">
              <label class="block mb-1 text-sm font-medium">Price</label>
              <input
                type="number"
                formControlName="price"
                class="w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50"
              />
            </div>

            <button
              type="button"
              class="mt-[25px] h-8 px-2 py-1 m-2 text-xs font-bold text-white transition-all bg-blue-500 rounded w-36 hover:bg-blue-600"
              (click)="onSubmitSupplementDetails(i, m)"
            >
              + Supplement
            </button>
            <!-- <button
              type="button"
              class="text-red-500"
              (click)="removeSupplement(i, m)"
            >
              Remove Supplement
            </button> -->

            <button
            type="button"
            class="mt-3 text-red-500 transition-all hover:text-red-700"
            (click)="removeSupplement(i, m)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>

            
          </div>
        </div>

        <!-- Add Supplement Button -->
        <button
          type="button"
          class="px-2 py-1 mt-2 font-bold text-white transition-all bg-green-500 rounded hover:bg-green-700"
          (click)="addSupplement(i)"
        >
          New Supplement
        </button>
      </div>
    </div>
  </div>

  <!-- Add Season Button -->
  <button
    type="button"
    class="px-2 py-1 mt-3 font-bold text-white transition-all bg-green-500 rounded hover:bg-green-700"
    (click)="addSeason()"
    [disabled]="!isContractSubmitted"
  >
    New Season
  </button>

  <button
    type="button"
    class="px-2 py-1 mx-10 mt-3 font-bold text-white transition-all bg-green-500 rounded hover:bg-green-700"
    (click)="complete()"
    [disabled]="!isContractSubmitted"
  >
    Complete
  </button>
</form>
